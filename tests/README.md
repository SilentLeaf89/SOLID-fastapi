# Инфраструктура для тестов

Для выполнения тестов возможны две опции:

1. Выполнить тесты в docker контейнер в интеграции с prod-версией приложения. Для выполните следующие действия:

- Создайте файл `.env.tests` в директории [tests](/tests) с таким же наполнением как и файл `.env.tests.docker.example`.

- Выполните команду `make test`.

2. Выполнить тесты локально в интеграции с dev-версией приложения, так как prod-версия не подразумевает открытые соединения ElasticSearch и Redis. Для этого выполните следующие действия:

- Создайте файл `.env.tests` в директории [tests](/tests) с таким же наполнением как и файл `.env.tests.local.example`.

- Установите в виртуальное окружение зависимости от основного приложения в файле [requirements.txt](/requirements.txt) и тестовые зависимости в файле [tests/test_requirements.txt](/tests/test_requirements.txt).

- Убедитесь что dev-версия приложения работает - запустить его возможно командой `make dev`.

- Перейдите в директорию tests: `cd tests`.

- Выполните файл `test-local.sh`:  `./test-local.sh`.

В обоих случаях результаты тестирования и логи будут доступны в директории [tests/logs](/tests/logs/):

- Файл [pytest.output.log](/tests/logs/pytest.output.log) показывает последние результаты тестов.

- Файл [tests.log](/tests/logs/tests.log) показывает все сопутствующие логи, например такие как оповещение об успешности подключения к базам данных.